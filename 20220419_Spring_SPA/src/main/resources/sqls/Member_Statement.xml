<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.edu.model.mapper.MemberDaoImpl">

<!-- 회원 전체 조회 -->
<select id="selectMemberAll" resultType="MemberVo">
  SELECT ID,PW, AUTH, DELFLAG, REGDATE FROM SPRINGMEMBER 
  ORDER BY REGDATE DESC
</select>

<!-- 회원 가입 -->
<insert id="insertMember" parameterType="java.util.Map">
  INSERT INTO SPRINGMEMBER (ID,PW,AUTH,DELFLAG,REGDATE) VALUES (#{id},#{pw},'U','N',SYSDATE)
</insert>

<!-- 로그인 -->
<select id="loginMember" parameterType="java.util.Map" resultType="MemberVo">
  SELECT ID, AUTH,REGDATE FROM SPRINGMEMBER WHERE ID=#{id} AND PW=#{pw} AND DELFLAG ='N'
</select>

<!-- 비밀번호 확인 -->
<select id="passwordCheck" parameterType="java.lang.String" resultType="java.lang.String">
  SELECT PW
    FROM SPRINGMEMBER
      WHERE ID=#{id}
</select>

<!-- ID로그인 -->
<select id="enLogin" parameterType="java.lang.String" resultType="MemberVo">
  SELECT ID, AUTH,REGDATE FROM SPRINGMEMBER WHERE ID=#{id}
</select>

<!-- 상태 변경 -->
<update id="changeUser" parameterType="java.util.Map">
  UPDATE SPRINGMEMBER SET DELFALG=#{delflag} WHERE ID = #{id}
</update>

</mapper>
